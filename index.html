<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CODEX - SAT VIEW v3</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --blue: #00d9ff; --red: #ff4d4d; --dark: #050505; }
        body { background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; }
        
        /* HEADER AVEC TON AVATAR IA */
        .header { background: rgba(0,0,0,0.9); padding: 10px; display: flex; align-items: center; border-bottom: 2px solid var(--blue); z-index: 1000; position: relative; }
        .avatar { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--blue); box-shadow: 0 0 15px var(--blue); overflow: hidden; margin-right: 15px; }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }

        /* LA CARTE REELLE */
        #map { width: 100%; height: 60vh; background: #000; }

        /* DASHBOARD */
        .dashboard { padding: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; background: #0a0a0a; height: 40vh; }
        .stat-box { background: #111; border: 1px solid #222; padding: 10px; border-radius: 5px; }
        .money { font-size: 1.4rem; color: #f1c40f; font-weight: bold; }
        
        .btn { padding: 12px; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        .btn-buy { background: var(--blue); color: #000; width: 100%; }
        .btn-rob { background: transparent; border: 1px solid var(--red); color: var(--red); width: 100%; margin-top: 10px; }

        /* Filtre Noir pour la carte */
        .leaflet-container { background: #000 !important; }
        .leaflet-tile-pane { filter: brightness(0.4) invert(1) contrast(3) hue-rotate(180deg); }
    </style>
</head>
<body>

<div class="header">
    <div class="avatar">
        <img src="https://i.ibb.co/Lzf7P8Q/avatar-ai.jpg" alt="AI">
    </div>
    <div>
        <div style="color: var(--blue); font-weight: bold; letter-spacing: 2px;">CODEX OPERATIVE</div>
        <div id="ai-status" style="font-size: 0.7rem; color: #888;">"Carte satellite activée. En attente de cibles."</div>
    </div>
</div>

<div id="map"></div>

<div class="dashboard">
    <div class="stat-box" style="grid-column: span 2;">
        <div style="font-size: 0.7rem; color: #555;">CAPITAL DISPONIBLE</div>
        <div id="cash-val" class="money">10 000 Ø</div>
    </div>
    
    <div class="stat-box">
        <button class="btn btn-buy" onclick="addAsset()">ACHETER ICI</button>
    </div>
    
    <div class="stat-box">
        <button class="btn btn-rob" onclick="robSystem()">BRAQUAGE</button>
    </div>

    <div class="stat-box" style="grid-column: span 2; font-size: 0.7rem; color: #444; overflow-y: auto;" id="logs">
        > Liaison satellite établie...
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Initialisation de la carte sur Paris (modifiable)
    var map = L.map('map').setView([48.8566, 2.3522], 13);
    
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Codex Sat'
    }).addTo(map);

    let cash = 10000;
    
    function updateUI() {
        document.getElementById('cash-val').innerText = cash.toLocaleString() + " Ø";
    }

    function addAsset() {
        if(cash >= 5000) {
            cash -= 5000;
            let center = map.getCenter();
            L.circle([center.lat, center.lng], {
                color: '#00d9ff',
                fillColor: '#00d9ff',
                fillOpacity: 0.5,
                radius: 200
            }).addTo(map);
            document.getElementById('logs').innerHTML = "> Secteur sécurisé. Revenus en cours...<br>" + document.getElementById('logs').innerHTML;
            updateUI();
        }
    }

    function robSystem() {
        let win = Math.random() > 0.5;
        if(win) {
            cash += 2000;
            document.getElementById('logs').innerHTML = "> BRAQUAGE RÉUSSI : +2000 Ø<br>" + document.getElementById('logs').innerHTML;
        } else {
            cash -= 1000;
            document.getElementById('logs').innerHTML = "> ALERTE : Échec du piratage.<br>" + document.getElementById('logs').innerHTML;
        }
        updateUI();
    }
</script>

</body>
</html>
